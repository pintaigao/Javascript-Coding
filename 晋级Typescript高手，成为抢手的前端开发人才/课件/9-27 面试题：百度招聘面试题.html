<div class="work-markdown-content">    <div class="content">     <div class="cl-preview-section"><h4 id="题目：百度招聘面试题—巧用-keyof-和-infer解决-复杂泛型问题">题目：百度招聘面试题 — 巧用 keyof 和 infer 解决 复杂泛型问题</h4>
</div><div class="cl-preview-section"><h4 id="提示：我已经给了提示，如果感觉不好下手做，先测试提示代码">提示：我已经给了提示，如果感觉不好下手做，先测试提示代码</h4>
</div><div class="cl-preview-section"><h4 id="已知条件1：action接口，foodmodule-类">已知条件 1：Action 接口，FoodModule 类</h4>
</div><div class="cl-preview-section normal-code"><pre class=" language-js"><code class="prism  language-js"><span class="token keyword">interface</span> <span class="token class-name">Action</span><span class="token operator">&lt;</span>T <span class="token operator">=</span> any<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> string
  payload<span class="token operator">?</span><span class="token punctuation">:</span> T
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">FoodModule</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> topic<span class="token punctuation">:</span> string<span class="token punctuation">;</span>
  <span class="token keyword">public</span> count<span class="token operator">!</span><span class="token punctuation">:</span> number<span class="token punctuation">;</span>
  <span class="token function">delay</span><span class="token punctuation">(</span>promise<span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>second<span class="token punctuation">:</span> number<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">"delay"</span><span class="token punctuation">,</span>
      payload<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`延迟 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>second<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 秒`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">searchFoodByCity</span><span class="token punctuation">(</span>action<span class="token punctuation">:</span> Action<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      payload<span class="token punctuation">:</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">,</span>
      type<span class="token punctuation">:</span> <span class="token string">'searchFoodByCity'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li></ul></pre>
<div class="code-top">                            <div class="left"><span>代码块</span><i class="imv2-code"></i></div>                            <div class="right">                                <span class="copy">复制<textarea type="text" class="code" style="width:1px;height:1px;"></textarea></span>                                <span class="preview">预览</span>                                <div class="copysuccess hide">复制成功！</div>                            </div>                        </div></div><div class="cl-preview-section"><h4 id="已知条件2：">已知条件 2：</h4>
</div><div class="cl-preview-section"><p>BaseConvert  的函数，这个对象上提取了 FoodModule  两个方法声明 ，并增加了两个方法类型。</p>
</div><div class="cl-preview-section normal-code"><pre class=" language-js"><code class="prism  language-js">type asyncMethod<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>input<span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Promise<span class="token operator">&lt;</span>Action<span class="token operator">&lt;</span>U<span class="token operator">&gt;&gt;</span>
type asyncMethodConnect<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>input<span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Action<span class="token operator">&lt;</span>U<span class="token operator">&gt;</span>
    
type syncMethod<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>action<span class="token punctuation">:</span> Action<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Action<span class="token operator">&lt;</span>U<span class="token operator">&gt;</span>
type syncMethodConnect<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>action<span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Action<span class="token operator">&lt;</span>U<span class="token operator">&gt;</span>
</code><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li></ul></pre>
<div class="code-top">                            <div class="left"><span>代码块</span><i class="imv2-code"></i></div>                            <div class="right">                                <span class="copy">复制<textarea type="text" class="code" style="width:1px;height:1px;"></textarea></span>                                <span class="preview">预览</span>                                <div class="copysuccess hide">复制成功！</div>                            </div>                        </div></div><div class="cl-preview-section"><p><strong>要求</strong>：定义一个 Convert 类型，接受 FoodModule  实例或者 和 FoodModule  方法同类型的实例，</p>
</div><div class="cl-preview-section"><p>然后输出一个类型，但这个类型改变了。</p>
</div><div class="cl-preview-section normal-code"><pre class=" language-js"><code class="prism  language-js">asyncMethod<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">&gt;</span><span class="token punctuation">(</span>input<span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>Action<span class="token operator">&lt;</span>U<span class="token operator">&gt;&gt;</span>  变成了
asyncMethod<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">&gt;</span><span class="token punctuation">(</span>input<span class="token punctuation">:</span> T<span class="token punctuation">)</span><span class="token punctuation">:</span> Action<span class="token operator">&lt;</span>U<span class="token operator">&gt;</span> 
    
syncMethod<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">&gt;</span><span class="token punctuation">(</span>action<span class="token punctuation">:</span> Action<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Action<span class="token operator">&lt;</span>U<span class="token operator">&gt;</span>  变成了
syncMethod<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">&gt;</span><span class="token punctuation">(</span>action<span class="token punctuation">:</span> T<span class="token punctuation">)</span><span class="token punctuation">:</span> Action<span class="token operator">&lt;</span>U<span class="token operator">&gt;</span>
    

<span class="token comment">// 最终要得到的结果:</span>
type <span class="token function-variable function">Convert</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  delay<span class="token punctuation">:</span> asyncMethodConnect<span class="token operator">&lt;</span>number<span class="token punctuation">,</span> string<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  searchFoodByCity<span class="token punctuation">:</span> syncMethodConnect<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li></ul></pre>
<div class="code-top">                            <div class="left"><span>代码块</span><i class="imv2-code"></i></div>                            <div class="right">                                <span class="copy">复制<textarea type="text" class="code" style="width:1px;height:1px;"></textarea></span>                                <span class="preview">预览</span>                                <div class="copysuccess hide">复制成功！</div>                            </div>                        </div></div><div class="cl-preview-section"><p><strong>提示：</strong> 先了解下面 MethodName 类型的含义，可以通过测试来了解</p>
</div><div class="cl-preview-section normal-code"><pre class=" language-js"><code class="prism  language-js"><span class="token comment">// 第一步：</span>
type MethodName<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>F <span class="token keyword">in</span> keyof T<span class="token punctuation">]</span><span class="token punctuation">:</span> T<span class="token punctuation">[</span>F<span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name">Function</span> <span class="token operator">?</span> F <span class="token punctuation">:</span> never
<span class="token punctuation">}</span><span class="token punctuation">[</span>keyof T<span class="token punctuation">]</span>

<span class="token comment">// 第二步：用 infer </span>

</code><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li></ul></pre>
<div class="code-top">                            <div class="left"><span>代码块</span><i class="imv2-code"></i></div>                            <div class="right">                                <span class="copy">复制<textarea type="text" class="code" style="width:1px;height:1px;"></textarea></span>                                <span class="preview">预览</span>                                <div class="copysuccess hide">复制成功！</div>                            </div>                        </div></div><div class="cl-preview-section"><p><strong>请在小节下方的问答区写出具体答案，与其它小伙伴来一起讨论～～</strong></p>
</div>    </div>    <!-- <div class="content-more">     <div class="shadow-bg"></div>     <div class="white-bg">      <a class="js-hide-mask-layer" href="javascript:;">查看完整内容</a>     </div>    </div> -->   </div>

【认准一手加微信307570512 】
 代下载高价回收正版课程（换课换vip，帮回血）
